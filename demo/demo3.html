<!doctype html>
<html>

<head>
	
	<meta charset="utf-8">
	
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>OMG! Responsive ads... On demand!</title>
	<meta name="description" content="Ad calls in head: Experiments using writeCapture() and onMediaQuery() to call OpenX's showAdUnit() based on viewport size!">
	
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="apple-mobile-web-app-capable" content="yes">
	
	<link rel="stylesheet" href="css/demo.css">
	
	<!-- https://github.com/scottjehl/Respond/ -->
	<!--[if (lt IE 9) & (!IEMobile)]>
		<script src="js/respond-1.1.0.min.js"></script>
	<![endif]-->
	
	<script src="http://ox-d.registerguard.com/w/1.0/jstag"></script>
	<script>
		<!--
			
			var $ox = OX();
			$ox.addPage('12679');
			$ox.fetchAds();
			
		//-->
	</script>
	
</head>
<body>
	
	<div id="skinny"></div>
	
	<div id="desktop"></div>
	
	<hr>
	
	<p>Browser's tested:</p>
	
	<ul>
		<li>
			<b>MAC Snow Leopard:</b>
			<ul>
				<li>Firefox 14.0.x - <span class="passed">Passed!</span></li>
				<li>Safari 5.1.x - <span class="passed">Passed!</span></li>
				<li>Opera 12.00 - <span class="passed">Passed!</span></li>
				<li>Chrome 20.0.x - <span class="passed">Passed!</span></li>
			</ul>
		</li>
		<li>
			<b>PC Vista:</b>
			<ul>
				<li>Firefox 3.6.1.8 - <span class="passed">Passed!</span></li>
				<li>Firefox 14.0.x - <span class="passed">Passed!</span></li>
				<li>Chrome 20.0.x - <span class="passed">Passed!</span></li>
				<li>Safari 5.1.x - <span class="passed">Passed!</span></li>
				<li>Opera 12.00 - <span class="passed">Passed!</span></li>
				<li>IE 9.0.x - <span class="passed">Passed!</span></li>
				<li>
					IE 8.0.x - <span class="buggy">Buggy!</span>
					<ul>
						<li>Ad loads but throws error.</li>
						<li>Quarantined test page <a href="test1.html">here</a>.</li>
						<li><b>Question:</b> Could it be the ad that is the problem, and not the <code>writeCapture()</code> code?</li>
					</ul>
				</li>
				<li>
					IE 7.0.x - <span class="buggy">Buggy!</span> IBID.
					<ul>
						<li>Ad partially loads, stops loading at certain point and browser throws error.</li>
						<li>IBID</li>
					</ul>
				</li>
			</ul>
		</li>
		<li>
			<b>PC XP:</b>
			<ul>
				<li>IE 6.0.x - <span class="buggy">Buggy!</span> IBID, but... The Flash ad actually loads!</li>
			</ul>
		</li>
		<li>
			<b>iPhone 4:</b>
			<ul>
				<li>Safari 4.3 (simulated) - <span class="passed">Passed!</span></li>
				<li>Safari 5.1.1 - <span class="passed">Passed!</span></li>
				<li>Chrome 19.0.x - <span class="passed">Passed!</span></li>
				<li>Opera Mini 7.0.x - <span class="passed">Passed!</span></li>
			</ul>
		</li>
		<li>
			<b>iPhone:</b>
			<ul>
				<li>Safari 4.3 (simulated) - <span class="passed">Passed!</span></li>
			</ul>
		</li>
		<li>
			<b>iPad:</b>
			<ul>
				<li>Safari 4.3 (simulated) - <span class="passed">Passed!</span></li>
				<li>Safari 5.1.1 - <span class="passed">Passed!</span></li>
			</ul>
		</li>
	</ul>
	
	<hr>
	
	<p><b>Stuff:</b> Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent volutpat, <a href="#">enim sit amet fermentum mollis</a>, nibh sapien lacinia ante, in condimentum nulla eros sit amet lacus. Sed tortor ipsum, sollicitudin sed imperdiet lacinia, tristique quis leo. Aenean congue, arcu in placerat feugiat, ligula nisi cursus urna, eget adipiscing eros est ac enim. Pellentesque <a href="#">dignissim</a>, ligula ut scelerisque faucibus, felis odio ornare diam, ut vestibulum velit nisi at lorem. Morbi eu ligula sem. Curabitur sit amet enim eu lectus lobortis fermentum. Proin id magna dolor, quis iaculis tortor. Vestibulum eu elit felis, nec elementum ipsum. Fusce sit amet leo non magna cursus dignissim. Sed rhoncus lorem quis mi <a href="#">tristique</a> et viverra arcu varius. In at libero ante. Duis nisl ligula, lobortis quis aliquam quis, semper id enim. <a href="#">Pellentesque</a> orci nibh, rhoncus in tempus ac, tempus in risus. Duis sit amet massa in nulla auctor pulvinar at ut urna. Mauris posuere ornare augue quis congue. Integer tristique, lacus sit amet mattis tristique, purus erat congue lacus, id <a href="#">ullamcorper est ante</a> non libero.</p>
	<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent volutpat, <a href="#">enim sit amet fermentum mollis</a>, nibh sapien lacinia ante, in condimentum nulla eros sit amet lacus. Sed tortor ipsum, sollicitudin sed imperdiet lacinia, tristique quis leo. Aenean congue, arcu in placerat feugiat, ligula nisi cursus urna, eget adipiscing eros est ac enim. Pellentesque <a href="#">dignissim</a>, ligula ut scelerisque faucibus, felis odio ornare diam, ut vestibulum velit nisi at lorem. Morbi eu ligula sem. Curabitur sit amet enim eu lectus lobortis fermentum. Proin id magna dolor, quis iaculis tortor. Vestibulum eu elit felis, nec elementum ipsum. Fusce sit amet leo non magna cursus dignissim. Sed rhoncus lorem quis mi <a href="#">tristique</a> et viverra arcu varius. In at libero ante. Duis nisl ligula, lobortis quis aliquam quis, semper id enim. <a href="#">Pellentesque</a> orci nibh, rhoncus in tempus ac, tempus in risus. Duis sit amet massa in nulla auctor pulvinar at ut urna. Mauris posuere ornare augue quis congue. Integer tristique, lacus sit amet mattis tristique, purus erat congue lacus, id <a href="#">ullamcorper est ante</a> non libero.</p>
	<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent volutpat, <a href="#">enim sit amet fermentum mollis</a>, nibh sapien lacinia ante, in condimentum nulla eros sit amet lacus. Sed tortor ipsum, sollicitudin sed imperdiet lacinia, tristique quis leo. Aenean congue, arcu in placerat feugiat, ligula nisi cursus urna, eget adipiscing eros est ac enim. Pellentesque <a href="#">dignissim</a>, ligula ut scelerisque faucibus, felis odio ornare diam, ut vestibulum velit nisi at lorem. Morbi eu ligula sem. Curabitur sit amet enim eu lectus lobortis fermentum. Proin id magna dolor, quis iaculis tortor. Vestibulum eu elit felis, nec elementum ipsum. Fusce sit amet leo non magna cursus dignissim. Sed rhoncus lorem quis mi <a href="#">tristique</a> et viverra arcu varius. In at libero ante. Duis nisl ligula, lobortis quis aliquam quis, semper id enim. <a href="#">Pellentesque</a> orci nibh, rhoncus in tempus ac, tempus in risus. Duis sit amet massa in nulla auctor pulvinar at ut urna. Mauris posuere ornare augue quis congue. Integer tristique, lacus sit amet mattis tristique, purus erat congue lacus, id <a href="#">ullamcorper est ante</a> non libero.</p>
	
	<hr>
	
	<ol id="debug"></ol>
	
	<script src="js/plugins.js"></script>
	<script src="js/demo.js"></script>
	<script>
		<!--
			
			var  $ad1 = document.getElementById('skinny'),
			$ad2 = document.getElementById('desktop'),
			$units = {
				leaderboard      : '245133',
				medium_rectangle : '245135'
			},
			skinny = false,
			desktop = false,
			queries = [
				{
					context  : 'small',
					callback : function() {
						
						msg('small');
						
						if ( ! skinny) {
							
							$ad1.innerHTML = '';
							writeCapture($ad1).write('<script>$ox.showAdUnit("' + $units.medium_rectangle + '")<\/script>').close(); // Medium Rectangle.
							
							// Note: For additional ads, you'll need to chain writeCapture() calls with the callback.
							// http://rgne.ws/MpPgCU
							
						}
						
						skinny = true;
						
					}
				},
				{
					context  : 'large',
					callback : function() {
						
						msg('large');
						
						if ( ! desktop) {
							
							$ad2.innerHTML = '';
							writeCapture($ad2).write('<script>$ox.showAdUnit("' + $units.leaderboard + '")<\/script>').close(); // Leaderboard.
							
							// IBID
							
						}
						
						desktop = true;
						
					}
				}
			];
			
			window.onload = function() { MQ.init(queries); }
			
		//-->
	</script>
	
</body>
</html>